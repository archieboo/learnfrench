<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-10-01">

<title>Le Nouveau Taxi 3 - Leçon 7 – Learn French</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../profile.jpg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-250a0ad726c327aed60c1b8aba93cc6c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../profile.jpg" alt="" class="navbar-logo light-content">
    <img src="../../profile.jpg" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Learn French</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/archieboo"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Le Nouveau Taxi 3 - Leçon 7</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Le Nouveau Taxi</div>
                <div class="quarto-category">B1</div>
                <div class="quarto-category">le plus-que-parfait</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 1, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#grammaire---le-plus-que-parfait" id="toc-grammaire---le-plus-que-parfait" class="nav-link active" data-scroll-target="#grammaire---le-plus-que-parfait"><span class="header-section-number">1</span> Grammaire - le plus-que-parfait</a></li>
  <li><a href="#entaînez-vous" id="toc-entaînez-vous" class="nav-link" data-scroll-target="#entaînez-vous"><span class="header-section-number">2</span> Entaînez-vous</a></li>
  <li><a href="#texte---égalité-pour-tous" id="toc-texte---égalité-pour-tous" class="nav-link" data-scroll-target="#texte---égalité-pour-tous"><span class="header-section-number">3</span> Texte - Égalité pour tous</a></li>
  <li><a href="#thème" id="toc-thème" class="nav-link" data-scroll-target="#thème"><span class="header-section-number">4</span> Thème</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<section id="grammaire---le-plus-que-parfait" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="grammaire---le-plus-que-parfait"><span class="header-section-number">1</span> Grammaire - le plus-que-parfait</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Formation du plus-que-parfait
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>avoir</code> ou <code>être</code> à l’imparfait + participe passé</p>
</div>
</div>
<ol type="1">
<li><code>marcher</code></li>
</ol>
<ul>
<li>j’<code>avais marché</code></li>
<li>tu <code>avais marché</code></li>
<li>il/elle/on <code>avait marché</code></li>
<li>nous <code>avions marché</code></li>
<li>vous <code>aviez marché</code></li>
<li>ils/elles <code>avaient marché</code></li>
</ul>
<ol start="2" type="1">
<li><code>venir</code></li>
</ol>
<ul>
<li>j’<code>étais venu(e)</code></li>
<li>tu <code>étais venu(e)</code></li>
<li>il/elle/on <code>était venu(e)(s)</code></li>
<li>nous <code>étions venu(e)s</code></li>
<li>vous <code>étiez venu(e)(s)</code></li>
<li>ils/elles <code>étaient venu(e)s</code></li>
</ul>
<ol start="3" type="1">
<li>se lever</li>
</ol>
<ul>
<li>je m’<code>étais levé(e)</code></li>
<li>tu t’<code>étais levé(e)</code></li>
<li>il/elle/on s’<code>était levé(e)(s)</code></li>
<li>nous nous <code>étions levé(e)s</code></li>
<li>vous vous <code>étiez levé(e)(s)</code></li>
<li>ils/elles s’<code>étaient levé(e)s</code></li>
</ul>
<section id="le-passé-du-passé" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="le-passé-du-passé"><span class="header-section-number">1.1</span> le passé du passé</h3>
<p>Un événement qui s’est passé avant un autre événement du passé. Il s’emploie souvent avant un passé composé ou un imparfait.</p>
<ul>
<li>Je savais que tu étais venu à Paris en 2003.</li>
<li>Quand Quentin est arrivé, le train était déjà parti.</li>
<li>Vous n’avez pas apporté le document que je vous avais donné?</li>
<li>La rue était mouillée (wet). Il avait plu toute la nuit.</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>des mouvement consécutifs
</div>
</div>
<div class="callout-body-container callout-body">
<p>For continuous movements, use passé composé.<br>
- Ce matin, elle s’est levée, elle s’est lavée, elle s’est maquillée et elle est allée au bureau. (spoken, repeating the subject for clarity)<br>
- Ce matin, elle s’est levée, lavée, maquillée et est allée au bureau. (written)</p>
</div>
</div>
</section>
</section>
<section id="entaînez-vous" class="level2 page-columns page-full" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="entaînez-vous"><span class="header-section-number">2</span> Entaînez-vous</h2>
<section id="part-1" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="part-1"><span class="header-section-number">2.1</span> part 1</h3>
<p>Le portier du Club 103 a refusé l’entrée de l’établissment à un jeune Sénégalais de 19 ans.<br>
La victime a saisi la Halde parce que</p>
<blockquote class="blockquote">
<p>La victime a saisi la Halde parce qu’on avait refusé l’acces à un club en raison de son origine.</p>
</blockquote>
<p>Pour ce poste de manager, l’entreprise a privilégié un home.<br>
La victime a saisi la Halde parce que</p>
<blockquote class="blockquote">
<p>La victime a saisi la Halde parce que les recruteurs avaient privilégié une candidature masculine.</p>
</blockquote>
<p>L’émission Nouveaux Talents a rejeté(抛弃，扔掉) la candidature de Julien N. à cause de son âge. La victime a saisi la Halde parce que</p>
<blockquote class="blockquote">
<p>La victime a saisi la Halde parce que l’émission Nouveaux Talents avait refusé sa candidature en raison de son âge.</p>
</blockquote>
<p>Mlle H. a très souvent entendu des remarques désagréables sur son physique depuis son entrée dans l’entreprise. La victime a saisi la Halde parce que</p>
<blockquote class="blockquote">
<p>La victime a saisi la Halde parce que ses collègues lui avaient rendu la vie impossible.<br>
La victime a saisi la Halde parce que ses collègues l’avaient bafoué(嘲笑) tout le temps.</p>
</blockquote>
</section>
<section id="part-2" class="level3 page-columns page-full" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="part-2"><span class="header-section-number">2.2</span> part 2</h3>
<p><em>Imparfait, passé compossé ou plus-que-parfait? Mettez les verbes entre parenthèses au temps qui convient.</em></p>
<p>Monique F. de Rouen (<em>être engagé</em>) en août dernier au poste de secrétaire dans l’entreprise Merlo. Elle (<em>donner</em>) entière<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> satisfaction à son supérieur hiérarchique et tous ses collègues (<em>l’apprécier</em>). Mais, en novembre dernier, elle (<em>recevoir</em>) sa lettre de licenciement<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> pour raison économique. En fait, elle (<em>apprendre</em>) la semaine dernière par une employée de la sociéte que le directeur (<em>accorder</em>) le poste qu’elle (<em>occuper</em>) à une personne de sa famille et cela dans les jours qui (<em>suivre</em>) son départ.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;entière = entirely</p></div><div id="fn2"><p><sup>2</sup>&nbsp;lettre de licenciement = letter of dismissal</p></div></div><blockquote class="blockquote">
<ul>
<li>a été engagée<br>
</li>
<li>donnait</li>
<li>l’appréciaient</li>
<li>a reçu</li>
<li>a apprendu</li>
<li>avait accordé</li>
<li>avait occupé</li>
<li>avaient suivi</li>
</ul>
</blockquote>
</section>
</section>
<section id="texte---égalité-pour-tous" class="level2 page-columns page-full" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="texte---égalité-pour-tous"><span class="header-section-number">3</span> Texte - Égalité pour tous</h2>
<p>Madame, Monsieur,</p>
<p>Comme je recherce actuellement un studio, j’ai pris contact par téléphone avec une agence immobilière. J’ai expliqué à la responsable de l’angence que je ne pouvais pas me déplacer: elle m’a alors envoyé un dossier que j’ai complété et envoyé par fax. Le lendemain<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, elle m’a renvoyé le dossier que j’avais complété. Elle m’a simplement indiqué qu’elle n’avait plus de studios disponibles.</p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;the next/following day</p></div></div><p>Deux semaines plus tard, je suis passée devant cette agence: elle avait laissé les deux annonces dont elle m’avait initialement parlé au téléphone. Quand je suis entrée pour demander des explications, la directrice de l’agence m’a indiqué que les propriétaires des studios ne souhaitaient pas louer ces appartements à étudiants.</p>
<p>Pourriez-vous me dire s’ils ont le droit de faire cela?</p>
<p>Merci pour votre aide.<br>
Cordialement,<br>
xxx</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>saisir
</div>
</div>
<div class="callout-body-container callout-body">
<p>saisir = to take, to seize, to grab, to catch, to understand, to grasp…</p>
<p>saisir un ballon<br>
saisir une branche<br>
saisir qn à bras le corps (catch, grab)</p>
<p>saisir une occasion, une opportunité (seize…)<br>
- Vous aves bien saisi ce que j’ai dit? (understand, grasp)</p>
<p>saisir qn de qch (submit, present)<br>
- saisir un tribunal d’une affaire (to bring a case before a court)<br>
- saisir une commission d’un project de loi (to submit a bill to a committee)<br>
- Le parquet a été saisi de l’affaire. (The public prosecutor’s office has been notified of the case.)</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>prendre contact avec qn
</div>
</div>
<div class="callout-body-container callout-body">
<p>to get in touch with sb, to contact sb<br>
- Il va prendre contact avec elle dès ce soir. (dès = as soon as)</p>
<p>rester/être en contact avec qn, garder le contact avec qn (keep in touch with sb)<br>
- Nous restons en contact par téléphone.<br>
- Tu dois garder le contact avec lui.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>déplacer
</div>
</div>
<div class="callout-body-container callout-body">
<p>to move, to shift, to transfer, to displace<br>
- Il a déplacé une chaise pour nettoyer le parquet (wooden floor).<br>
- Le directeur a déplacé un employé à l’étranger.<br>
- Elle a déplacé l’heure de la réunion. (She changed the time of the meeting.)</p>
<p>déplacer un problème (escape or shift a problem… not solve it)<br>
régler un problème (solve a problem)<br>
se contenter (to be satisfied with, to settle for)<br>
- Il n’a rien réglé, il s’est contenté déplacer le probléme.</p>
<p>se déplacer: to go somewhere, to get around<br>
- Il ne se déplace jamais sans escorte. (He never goes anywhere without an escort.)</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>au téléphone
</div>
</div>
<div class="callout-body-container callout-body">
<p>parler au téléphone = to speak on the phone<br>
être au volant = driving (volant = steering wheel)<br>
être au travail = at work</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>indiquer
</div>
</div>
<div class="callout-body-container callout-body">
<p>to indicate, to point out, to show - Cette carte de restaurant n’indique pas le prix.<br>
- indique l’heure à qn<br>
- indiquer le chemin à qn</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>avoir le droit de faire qch
</div>
</div>
<div class="callout-body-container callout-body">
<p>to have the right to do sth<br>
- Les consommateurs ont le droit de savoir les ingrédients de l’aliment qu’ils achètent. (aliment = food stuff)<br>
- Les mineurs n’ont pas le droit de voter.</p>
</div>
</div>
</section>
<section id="thème" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="thème"><span class="header-section-number">4</span> Thème</h2>
<ol type="1">
<li><p>No one has the right to smoke in the hospital.<br>
<code>personne ne</code>, <code>avoir le droit de faire qch</code></p>
<blockquote class="blockquote">
<p>Personne n’a le droit de fumer à l’hôpital.</p>
</blockquote></li>
<li><p>I just reconnected with my classmates from college that I haven’t seen for 3 years.<br>
<code>venir de</code>, <code>prendre contact avec qn</code></p>
<blockquote class="blockquote">
<p>Je viens de reprendre contact avec mon camarade de l’université que je n’avais pas vu depuis trois ans.</p>
</blockquote></li>
<li><p>Call my any time if you have any problem.<br>
<code>si jamais</code>, <code>appeler qn</code></p>
<blockquote class="blockquote">
<p>Au cas où tu aurais des problèmes, n’hésite pas à m’appeler. (au cas où needs the conditional)<br>
Si jamais tu rencontres des difficultés, tu peux me téléphoner à tout moment.<br>
Si jamais tu as des ennuies, donne-moi un coup de fil quand tu veux. (donner un coup de fil = to give a call)</p>
</blockquote></li>
<li><p>Yesterday, he returned me the novel I lent him last week.</p>
<blockquote class="blockquote">
<p>Hier, il m’a rendu le roman qu eje lui avais prêté une semaine avant.</p>
</blockquote></li>
</ol>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>